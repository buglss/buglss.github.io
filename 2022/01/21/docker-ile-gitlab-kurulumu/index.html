<!DOCTYPE HTML>
<html lang="tr">
<head>
  <meta charset="utf-8"> 
  
  <title>Docker ile Gitlab Kurulumu | Yayınlarım</title>
  <meta name="author" content="Levent Sencer Şahin | buglss">
  
  <meta name="description" content="Kişisel Blog Sitesi">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Docker ile Gitlab Kurulumu"/>
  <meta property="og:site_name" content="Yayınlarım"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="/css/style.css">

   
  <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]-->
  
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-1DJ08V2W41"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-1DJ08V2W41');
	</script>


  
  <!-- Google Adsense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9137949280383612" crossorigin="anonymous"></script>
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
   
    <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Yayınlarım</a></h1>
  <h2><a href="/">Levent Sencer Şahin | buglss</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Ana Sayfa</a></li>
    
      <li><a href="/archives">Arşiv</a></li>
    
      <li><a href="/folios">Folyolar</a></li>
    
      <li><a href="/npm">npm</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
    <div id="content" class="inner">
      <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-docker-ile-gitlab-kurulumu" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="dt-published" datetime="2022-01-21T19:03:52.000Z">
          <span class="icon"></span> 
          <a href="/2022/01/21/docker-ile-gitlab-kurulumu/">21.01.2022</a>
          <span class="reading-time"> <span class="icon"></span> Okuma Süresi: <strong>2 dakika</strong>  </span>
        </time>
      
      
  
    <h1 class="p-name title" itemprop="headline name">Docker ile Gitlab Kurulumu</h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <h1 id="SSH-Port-Ayari"><a href="#SSH-Port-Ayari" class="headerlink" title="SSH Port Ayarı"></a>SSH Port Ayarı</h1><p>Gitlab 22 portunu kullandığı için işletim sisteminin ssh portunu 2222 olarak değiştir. <code>/etc/ssh/sshd_config</code> git.</p>
<figure class="highlight nginxconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment"># What ports, IPs and protocols we listen for</span></span><br><span class="line"><span class="attribute">Port</span> <span class="number">2222</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h1 id="Docker-ile-Calistir"><a href="#Docker-ile-Calistir" class="headerlink" title="Docker ile Çalıştır"></a>Docker ile Çalıştır</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run --detach --publish 443:443 --publish 80:80 --publish 22:22 --name gitlab --restart always --volume &lt;path&gt;/gitlab/config:/etc/gitlab --volume &lt;path&gt;/gitlab/logs:/var/log/gitlab --volume &lt;path&gt;/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h1 id="Gitlab-root-Kullanici"><a href="#Gitlab-root-Kullanici" class="headerlink" title="Gitlab root Kullanıcı"></a>Gitlab root Kullanıcı</h1><p>Gitlab konteynırına bağlan ve root parolasını resetle.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it gitlab bash</span><br><span class="line">$ gitlab-rake <span class="string">&quot;gitlab:password:reset[root]&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="Konfigurasyon"><a href="#Konfigurasyon" class="headerlink" title="Konfigürasyon"></a>Konfigürasyon</h1><p>Temel konfigürasyon ayarlarını yap. <code>&lt;path&gt;/gitlab/config/gitlab.rb</code> dosyasını aç. Aşağıdakiler uygula.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">## GitLab URL</span></span><br><span class="line"><span class="comment">##! URL on which GitLab will be reachable.</span></span><br><span class="line"><span class="comment">##! For more details on configuring external_url see:</span></span><br><span class="line"><span class="comment">##! https://docs.gitlab.com/omnibus/settings/configuration.html#configuring-the-external-url-for-gitlab</span></span><br><span class="line">external_url <span class="string">&#x27;https://git.&lt;domain&gt;.com&#x27;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">### GitLab email server settings</span></span><br><span class="line"><span class="comment">###! Docs: https://docs.gitlab.com/omnibus/settings/smtp.html</span></span><br><span class="line"><span class="comment">###! **Use smtp instead of sendmail/postfix.**</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_enable&#x27;</span>] = <span class="literal">true</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_address&#x27;</span>] = <span class="string">&quot;&lt;ip&gt;&quot;</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_port&#x27;</span>] = &lt;port&gt;</span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_user_name&#x27;</span>] = <span class="string">&quot;&lt;kullanici_adi&gt;&quot;</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_password&#x27;</span>] = <span class="string">&quot;&lt;parola&gt;&quot;</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_domain&#x27;</span>] = <span class="string">&quot;&lt;domain&gt;.com&quot;</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_authentication&#x27;</span>] = <span class="string">&quot;login&quot;</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_enable_starttls_auto&#x27;</span>] = <span class="literal">true</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;smtp_tls&#x27;</span>] = <span class="literal">false</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="comment">## Container Registry settings</span></span><br><span class="line"><span class="comment">##! Docs: https://docs.gitlab.com/ce/administration/container_registry.html</span></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line">registry_external_url <span class="string">&#x27;https://registry.&lt;domain&gt;.com&#x27;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h1 id="SSL-Sertifika"><a href="#SSL-Sertifika" class="headerlink" title="SSL Sertifika"></a>SSL Sertifika</h1><p>SSL sertifikalarını aktar. <code>&lt;path&gt;/gitlab/config/ssl</code> klasörünün içine git. <code>&lt;domain&gt;.com.crt</code>, <code>git.&lt;domain&gt;.com.key</code>, <code>registry.&lt;domain&gt;.com.crt</code> ve <code>registry.&lt;domain&gt;.com.key</code> isminde crt ve key dosyalarını at. Sonra gitlab konteynırına restart at.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker restart gitlab</span><br></pre></td></tr></table></figure>

<h1 id="Bonus"><a href="#Bonus" class="headerlink" title="Bonus"></a>Bonus</h1><p>Gitlab dosya ve dizinlerin sahipliklerinin olması gerektiği ayarlarda olması için aşağıdaki komutu çalıştırabilirsiniz. Olası bir sahiplik bozulmasında kullanılabilir.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it gitlab update-permissions</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/Kurulum/">Kurulum</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/docker/">docker</a>, <a href="/tags/gitlab/">gitlab</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article></div></div>
      <aside id="sidebar" class="alignright">
  <div class="search widget">
  <input id="local-search-input" type="search" name="q" results="0" placeholder="Ara">
  <div id="local-search-result"></div>
</div>


<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.js"></script>

<script type="text/javascript">
  var search_path = "search.xml";
  if(search_path.length == 0) {
    search_path = "search.xml";
  }
  var path = "/" + search_path;
  searchFunc(path, 'local-search-input', 'local-search-result');
</script>

  <div class="social widget">
    <h3 class="title">
        <span class="icon icon-social"></span>
        Sosyal Medya
    </h3>
    <ul class="inline-list">
        <li><a class="tooltip" data-tip="https://www.linkedin.com/in/buglss" target="_blank" href="https://www.linkedin.com/in/buglss"><i class="icon icon-linkedin"></i></a></li>
        <li><a class="tooltip" data-tip="https://github.com/buglss" target="_blank" href="https://github.com/buglss"><i class="icon icon-github"></i></a></li>
        <li><a class="tooltip" data-tip="l.sencer.sahin@gmail.com" target="_blank" href="mailto:l.sencer.sahin@gmail.com"><i class="icon icon-envelope"></i></a></li>
        <li><a class="tooltip" data-tip="https://www.facebook.com/buglss" target="_blank" href="https://www.facebook.com/buglss"><i class="icon icon-facebook"></i></a></li>
        <li><a class="tooltip" data-tip="https://twitter.com/buglss" target="_blank" href="https://twitter.com/buglss"><i class="icon icon-twitter"></i></a></li>
        <li><a class="tooltip" data-tip="https://www.instagram.com/buglss" target="_blank" href="https://www.instagram.com/buglss"><i class="icon icon-instagram"></i></a></li>
    </ul>
</div>

  
<div class="widget tagcloud">
  <h3 class="title">
    <span class="icon icon-cloud"></span>
    Etiket Bulutu</h3>
  <div class="entry">
    <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/docker/" style="font-size: 13.33px;">docker</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gitlab/" style="font-size: 10px;">gitlab</a> <a href="/tags/lvm/" style="font-size: 13.33px;">lvm</a> <a href="/tags/mongodb/" style="font-size: 16.67px;">mongodb</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 13.33px;">nginx</a> <a href="/tags/node-red/" style="font-size: 10px;">node-red</a> <a href="/tags/nodejs/" style="font-size: 16.67px;">nodejs</a> <a href="/tags/oAuth/" style="font-size: 10px;">oAuth</a> <a href="/tags/oyun/" style="font-size: 10px;">oyun</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/pm2/" style="font-size: 13.33px;">pm2</a> <a href="/tags/ssl/" style="font-size: 10px;">ssl</a> <a href="/tags/ubuntu/" style="font-size: 20px;">ubuntu</a> <a href="/tags/vscode/" style="font-size: 10px;">vscode</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/wordpress/" style="font-size: 13.33px;">wordpress</a>
  </div>
</div>


  
<div class="widget tag">
  <h3 class="title">
    <i class="icon icon-arrow-up"></i>
    Son Gönderiler
  </h3>
  <ul class="entry">
    
      <li>
        <i class="icon icon-right"></i>
        <a href="/2022/06/01/git-baslangic-orta/">Git Başlangıç ve Orta Seviye</a>
      </li>
    
      <li>
        <i class="icon icon-right"></i>
        <a href="/2022/01/25/nginx-reverse-proxy/">Nginx Reverse Proxy</a>
      </li>
    
      <li>
        <i class="icon icon-right"></i>
        <a href="/2022/01/25/windows-vscode-ssh-config-erisim-problemi/">Windows VSCode SSH config Erişim Problemi</a>
      </li>
    
      <li>
        <i class="icon icon-right"></i>
        <a href="/2022/01/22/ssl-sertifika-islemleri/">SSL Sertifika İşlemleri</a>
      </li>
    
      <li>
        <i class="icon icon-right"></i>
        <a href="/2022/01/22/mongodb-faydali-bilgiler/">Mongodb Faydalı Bilgiler</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title categories">
    <span class="icon"></span>
    Kategoriler
    <small> 22 </small>
  </h3>
  <ul class="entry">
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/categories/Faydali-Bilgiler/">Faydalı Bilgiler</a><small>9</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/categories/Haydali-Bilgiler/">Haydalı Bilgiler</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/categories/Kurulum/">Kurulum</a><small>9</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/categories/Wiki/">Wiki</a><small>3</small>
    </li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title tags">
    <span class="icon"></span>
    Etiketler
    <small> 38 </small>
  </h3>
  <ul class="entry">
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/apache/">apache</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/docker/">docker</a><small>2</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/git/">git</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/gitlab/">gitlab</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/lvm/">lvm</a><small>2</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/mongodb/">mongodb</a><small>3</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/mysql/">mysql</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/nginx/">nginx</a><small>2</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/node-red/">node-red</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/nodejs/">nodejs</a><small>3</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/oAuth/">oAuth</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/oyun/">oyun</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/php/">php</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/pm2/">pm2</a><small>2</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/ssl/">ssl</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/ubuntu/">ubuntu</a><small>11</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/vscode/">vscode</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/windows/">windows</a><small>1</small>
    </li>
  
    <li>
      <i class="icon icon-right"></i>
      <a href="/tags/wordpress/">wordpress</a><small>2</small>
    </li>
  
  </ul>
</div>

</aside>
      <div class="clearfix"></div>
    </div>
    <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2022 Levent Sencer Şahin | buglss
  
</div>
<div class="clearfix"></div>

<div class="progress-wrap">
  <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
    <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
  </svg>
</div>


<script src="/js/back-to-top.js"></script>
</footer>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/gallery.js"></script>





   
</body>
</html>
